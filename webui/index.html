<!doctype html>
<meta charset="utf-8">
<title>FURA</title>
<style>
  body { font-family: system-ui, sans-serif; max-width: 960px; margin: 32px auto; padding: 0 16px; }
  h1 { margin: 0 0 12px; }
  .row { margin: 8px 0; }
  textarea { width: 100%; height: 140px; }
  input[type=text] { width: 320px; }
  pre { white-space: pre-wrap; background: #fafafa; border: 1px solid #eee; padding: 12px; }
  small { color: #666; }
</style>

<h1>FURA UI</h1>

<div class="row">
  <label>Model: <input id="model" type="text" value="llama3:8b"></label>
</div>

<div class="row">
  <label>X-API-Key (nech prázdné pokud není vyžadováno):
    <input id="apikey" type="text" placeholder="FURA_API_KEY (volitelné)">
  </label>
</div>

<div class="row">
  <textarea id="msg" placeholder="Zadej dotaz…"></textarea>
</div>

<div class="row">
  <button id="send">Odeslat</button>
</div>

<pre id="out"></pre>
<small>Tip: API endpoints – <code>/ask</code>, <code>/v1/chat</code>, <code>/healthz</code></small>

<script>
  const btn = document.getElementById('send');
  const out = document.getElementById('out');

  btn.addEventListener('click', async () => {
    out.textContent = '…';
    const headers = { 'Content-Type': 'application/json' };
    const key = document.getElementById('apikey').value.trim();
    if (key) headers['X-API-Key'] = key;

    const body = {
      message: document.getElementById('msg').value,
      model: document.getElementById('model').value
    };

    try {
      const r = await fetch('/ask', { method:'POST', headers, body: JSON.stringify(body) });
      const data = await r.json();
      out.textContent = data.response ?? JSON.stringify(data, null, 2);
    } catch (e) {
      out.textContent = 'ERROR: ' + e;
    }
  });
</script>
