<!doctype html>
<meta charset="utf-8">
<title>FURA UI</title>
<h1>FURA UI</h1>

<label>Model: <input id="model" value="llama3:8b"></label><br>
<label>X-API-Key: <input id="xkey" placeholder="(nepovinné)"></label><br><br>

<textarea id="msg" rows="6" cols="80" placeholder="Zadej dotaz..."></textarea><br>
<button id="send">Odeslat</button>

<pre id="out" style="white-space: pre-wrap; background:#f6f6f6; padding:1em; margin-top:1em;"></pre>

<script>
const $ = (id) => document.getElementById(id);

$("send").onclick = async () => {
  const body = {
    message: $("msg").value,
    model: $("model").value
  };
  const headers = { "Content-Type": "application/json" };
  const k = $("xkey").value.trim();
  if (k) headers["X-API-Key"] = k;

  $("out").textContent = "⏳ Odesílám...";
  try {
    const r = await fetch("/ask", { method: "POST", headers, body: JSON.stringify(body) });
    const data = await r.json();
    $("out").textContent = data.response ?? JSON.stringify(data, null, 2);
  } catch (e) {
    $("out").textContent = "Chyba: " + e;
  }
};
</script>
