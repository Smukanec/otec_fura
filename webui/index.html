<!doctype html>
<meta charset="utf-8">
<title>FURA UI</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; line-height: 1.45; margin: 24px; }
  label { display:block; margin: 8px 0 4px; font-weight:600; }
  input[type=text], textarea { width: 680px; max-width: 100%; padding: 8px; border:1px solid #ccc; border-radius:8px; }
  textarea { height: 140px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
  button { padding:10px 14px; border:0; border-radius:10px; background:#111827; color:#fff; cursor:pointer; }
  button:disabled { opacity:.6; cursor:progress; }
  .row { margin-bottom: 12px; }
  #out { white-space: pre-wrap; background:#f9fafb; border:1px solid #e5e7eb; padding:12px; border-radius:10px; }
</style>

<h1>FURA UI</h1>

<div class="row">
  <label for="model">Model</label>
  <input id="model" type="text" value="llama3:8b">
</div>

<div class="row">
  <label for="apikey">X-API-Key (ponech prázdné, pokud není vyžadováno)</label>
  <input id="apikey" type="text" placeholder="">
</div>

<div class="row">
  <label for="msg">Zadej dotaz</label>
  <textarea id="msg" placeholder="Napiš dotaz…"></textarea>
</div>

<div class="row">
  <button id="send">Odeslat</button>
</div>

<h3>Odpověď</h3>
<pre id="out"></pre>

<script>
const $ = (id) => document.getElementById(id);
const btn = $('send');
const out = $('out');

btn.addEventListener('click', async () => {
  const body = {
    message: $('msg').value,
    model: $('model').value
  };
  const headers = {'Content-Type':'application/json'};
  const key = $('apikey').value.trim();
  if (key) headers['X-API-Key'] = key;

  btn.disabled = true; out.textContent = '⏳ Odesílám…';
  try {
    const r = await fetch('/ask', { method:'POST', headers, body: JSON.stringify(body) });
    const j = await r.json();
    out.textContent = (j && j.response) ? j.response : JSON.stringify(j, null, 2);
  } catch (e) {
    out.textContent = '❌ Chyba: ' + e.message;
  } finally {
    btn.disabled = false;
  }
});
</script>
